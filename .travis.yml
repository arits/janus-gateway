sudo: required
dist: trusty

env:
  global:
    - secure: "dyn+dDvcqHB8IkPWBnwDNE0rgTY2Rn2eHDD2JfwOUpe03owGkOJbwFQAt/LMGzf7FY7Zcy3Hbn2FWQ/ASNIaM9CejNH+y1B16dudQYAOF4nz5TbPaQMCu7ljA1czmvyy0r6jZ82FwGdaYNdeT84S3XEGks0p6JffSY5TKq/xZqi0d8JQrai1G5vI6jh4LagcihMINbYJKWd2doxJ6SotZLs+3m3I8vwPxPXW68lx6mVkM6W+eF9C7SAulNSPaZ8O0rimJbAMSSDGa/t/arzYiC3qFOK5ISkc62mEEdYnaXGMPi0PQPHjIuNB95Tz2Gi4QDnh3aO+GcpAsMH293REHREcsJ+87nHZ1T4G+hjSPnmTbdHLxHBxtiJ8wclv7Mh4zQZ+Ou4+8COsWbSurWZfCsogqWVSjpTEQBElF7yDnm+5VrZ1YRrAFUSoCN5LUnlaVes4Z59Hi2AlKrcHd2gpyTeoz0WrxA/xzXbuN6gQq1HFD3m+eBPC3g117uuCANdy7c2OWc4xYYoc4in1MCxnbCcuLJzGG2TXsr7/1EDt8N1CgtY0rXXvABzs6ycITGA493TT5lpg42XuXJD3ZjEivaNq85Eo7XWNjtSTn+3hCjqGx7tFFrMG4dCzLvYLrthyRNCYKrI7EWpx2AB/u2KKHOt7j4Af/Yy0beLN0yzAcsA="
    - secure: "nwDs3c+xch7yryD7P+ginKSOeIowckBD1WwwGA001Emf0tAbUQKL+0SstaeBdttx5yuhEdPzRMKVpCmal/nbwAO8HENMGIWulC7D7t7W6/+RsdEMTFjcXDR9lL9o0DLFsD64hFRfu6yrcL1H0m69VemlHrW71FeDYtCbDUBjwiVXds/rP8Ng02OZgXq/T5QjybbAOBzDd5ULALsyjOiInZ4xQY1o+DCVrcloC9ji259One18WSO24/eV5NiwKP1+Zbo+mn0kQecvNLAj2MvDdvF1yqCnRaONdHLyb2qaQCilA2ZPn64yi6OM76+csUoKq3uzgP7BoD1u/wVgVTdlF4Eghw0phzvvz38KStZQvvidF7vsSCIJ2YsSDn/sisa+ZqAuitKw0Ib+unyOICHlixCJHBSRj2lZyLfSrAzuVmWaibNCWwbq6pzYhSI25TsLnAj8WxQKh+GyqefgK8wKcE8MLsq7HhwfcVpoTCLivpJK7iG92f9qmgi+ue9wp9zHxQhygxwGj8nddj/awKCpG4QGzP9C/UIsPXuYioH3SzNkoDkWMLzmIW5YpN91rIAlk92ea0BAfXLNzxPqVDNKGI+u8vRAGvDRwnK8IyJxwpq/Ldgwj/RwbYf+SpQeQN81dyVSDCQ4N8Wx7yKyJ+uXV6zweRKsfExxDc9QXtJIkZo="

addons:
  coverity_scan:

    # GitHub project metadata
    # ** specific to your project **
    project:
      name: janus-gateway
      version: 1.0
      description: JanusGateway

    # Where email notification of build analysis results will be sent
    #notification_email: scan_notifications@example.com

    # Commands to prepare for build_command
    # ** likely specific to your build **
    build_command_prepend: ./configure --prefix=$HOME/janusbuild --disable-docs --disable-data-channels --disable-rabbitmq --disable-websockets

    # The command that will be added as an argument to "cov-build" to compile your project for analysis,
    # ** likely specific to your build **
    build_command: make

    # Pattern to match selecting branches that will run analysis. We recommend leaving this set to 'coverity_scan'.
    # Take care in resource usage, and consider the build frequency allowances per
    #   https://scan.coverity.com/faq#frequency
    branch_pattern: coverity_scan


language: c++
before_script:
    - sudo apt-get update -qq
    - sudo apt-get install -qq build-essential cmake libopus-dev libmicrohttpd-dev libini-config-dev libjansson-dev libnice-dev libssl-dev libsrtp-dev libsofia-sip-ua-dev libglib2.0-dev libogg-dev pkg-config gengetopt libtool automake
script:
    - sh autogen.sh
    - ./configure --prefix=$HOME/janusbuild --disable-docs --disable-data-channels --disable-rabbitmq --disable-websockets
    - make
    - make install
